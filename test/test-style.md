
# 测试内容

## 内网穿透软件

- 全傻瓜需求：花生壳（有免费）

```
- 下载软件：<https://hsk.oray.com/>
- 官网帮助文档：<https://service.oray.com/question/10541.html>
- 下一步下一步安装
- 打开软件，微信扫码登录
- 点击右下角加号 "添加映射"，会跳转到花生壳官网
- 选择：【用户中心】--【花生壳管理】--【点击对应帐号】--【域名列表】
- 需要花费 6 块进行购买穿透服务，而且还要下载他们 APP 进行实名认证。这些挺坑的，其他就还好。
```


- 半傻瓜需求：natapp（有免费）

```
- 官网帮助文档：<https://natapp.cn/article/natapp_newbie>
- 官网注册账号
- 登录，点击左上角：购买免费隧道
- 填写映射的本地端口后会给你生成一个 authtoken
- Windows 系统
    - 修改 config.ini，填写 authtoken
    - 双击 natapp.exe 即可
- Linux、macOS
     - 赋权：chmod a+x natapp
     - 执行：./natapp -authtoken=9ab6b9040a624f40
- 执行成功会告诉你一个临时的免费域名，这个域名是动态的，每次启动都会变，所以相对比较麻烦。
```

- 全配置需求：frp
- 一般都要下载花生壳、natapp，它们都是有崩过的经历，所以别在关键时候掉链子了

## 测试流程

- 测试用例
- 测试数据
- 测试脚本
- 执行测试
- 测试报告
- 问题跟踪
- 数据库
    - 清洗隐私数据（密码、身份证、手机号、邮箱地址、居住地址）
    - 数据同步规则、同步周期

## 细节考虑

- 移动端设备电量、网络有限
- 注意电量、流量在各个业务场景下的使用情况

## 单元测试

- 业务主流程必写
- 出现 Bug 的流程必须补充

## Mock 测试

- YApi
- [Mock 手册](../dev/common/mock.md)

## UI 自动化测试

- 业务主流程必写
- 出现 Bug 的流程必须补充

## 接口自动化测试

- 业务主流程必写
- 核心模块必写
- 出现 Bug 的流程必须补充

## 压力测试

- 业务主流程必写
- 核心模块必写
- 出现 Bug 的流程必须补充
- 秒杀、促销必须压力测试
- 新架构基准测试


## 接口压力测试

- 业务 API 接口：95% Line 控制在 2 秒以内
- 底层 API 接口：95% Line 控制在 300 毫秒以内
- JVM 异常监控
    - VisualVM
    - JProfile

## 容量规划

- 长期容量规划
- 短期容量规划


## 安全

- SQL 注入
- CSRF 跨站请求伪造
- XSS 跨站脚本
- 文件上传漏洞
- 密码加盐再加密需求
- 对称加密（AES） + base64
- 非对称加密（RSA） + 签名和验签方式
    - 请求参数
    - 按照第一个字符的键值 ASCII 码递增排序（字母升序排序），如果遇到相同字符则按照第二个字符的键值 ASCII 码递增排序，以此类推。
    - 将排序后的参数与其对应值，组合成 “参数=参数值” 的格式，并且把这些参数用 & 字符连接起来，此时生成的字符串 **为待签名字符串**，类似格式：`aa=11&bb=22&cc=33`
    - 签名：安全BASE64(SHA256WithRSA(代签名字符串 + 私钥))
